<!DOCTYPE html>
<html>
<head>
    <title>{{ project.title }}</title>
    <meta charset="UTF-8">
    <style>
        @page {
            size: letter;
            margin: 1.5cm 2cm;
            @top-center {
                content: string(title);
                font-family: "Helvetica Neue", sans-serif;
                font-size: 9pt;
                color: #666;
                padding: 0.5cm;
                border-bottom: 0.5pt solid #eee;
            }
        }
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .hidden-title {
            visibility: hidden;
            height: 0;
            margin: 0;
            padding: 0;
            position: absolute;
            string-set: title content();
        }
        .page {
            page-break-after: always;
            height: 249.4mm;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .image-container {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        .image-group {
            text-align: center;
            width: 100%;
        }
        .horizontal-layout {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .horizontal-layout .image-wrapper {
            flex: 0 1 47%;
            margin: 0 0.2cm;
        }
        .vertical-layout .image-wrapper {
            width: 85%;
            margin: 1cm auto;
        }
        .image-wrapper {
            display: inline-block;
        }
        img {
            max-width: 100%;
            max-height: 100%;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <h1 class="hidden-title">{{ project.title }}</h1>
    {% for group in image_groups %}
    <div class="page">
        <div class="image-container">
            <div class="image-group {% if group.layout == 'horizontal' %}horizontal-layout{% else %}vertical-layout{% endif %}">
                {% for image in group.images %}
                <div class="image-wrapper">
                    <img src="{{ image }}" alt="">
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
</body>
</html>